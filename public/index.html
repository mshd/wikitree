<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width">
  <title>WikiTree</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <style type="text/css">
    .Treant {
      position: relative;
      overflow: hidden;
      padding: 0 !important;
    }

    .Treant>.node,
    .Treant>.pseudo {
      position: absolute;
      display: block;
      visibility: hidden;
    }

    .Treant.loaded .node,
    .Treant.loaded .pseudo {
      visibility: visible;
    }

    .Treant>.pseudo {
      width: 0;
      height: 0;
      border: none;
      padding: 0;
    }

    .Treant .collapse-switch {
      width: 3px;
      height: 3px;
      display: block;
      border: 1px solid black;
      position: absolute;
      right: 1px;
      cursor: pointer;
    }

    .Treant .collapsed .collapse-switch {
      background-color: #868DEE;
    }

    .Treant>.node img {
      border: none;
      float: left;
    }

    .Treant .collapse-switch {
      width: 10%;
      height: 20%;
      bottom: 1px;
      border: none;
    }

    .Treant .node.collapsed {
      border: 2px solid #000;
    }

    .Treant .node.collapsed .collapse-switch {
      background: none;
    }

    /*body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td { margin:0; padding:0; }*/
    p,
    blockquote,
    th,
    td {
      margin: 0;
      padding: 0;
    }

    table {
      border-collapse: collapse;
      border-spacing: 0;
    }

    fieldset,
    img {
      border: 0;
    }

    address,
    caption,
    cite,
    code,
    dfn,
    em,
    strong,
    th,
    var {
      font-style: normal;
      font-weight: normal;
    }

    caption,
    th {
      text-align: left;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-size: 100%;
      font-weight: normal;
    }

    q:before,
    q:after {
      content: '';
    }

    abbr,
    acronym {
      border: 0;
    }

    body {
      background: #fff;
    }

    /* optional Container STYLES */
    .chart {
      height: 90%;
      margin: 5px;
      width: 100%;
    }

    .Treant>.node {}

    .Treant>p {
      font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
      font-weight: bold;
      font-size: 12px;
    }

    .node-name {
      font-weight: bold;
    }

    .node {
      padding: 2px;
      -webkit-border-radius: 3px;
      -moz-border-radius: 3px;
      border-radius: 3px;
      background-color: #ffffff;
      border: 1px solid #000;
      width: 220px;
      font-family: Tahoma;
      font-size: 12px;
    }

    .node a {
      color: black;
      text-decoration: none;
    }

    .node-female {
      background-color: rgba(255, 0, 0, 0.1);
    }

    .node-male {
      background-color: rgba(0, 0, 255, 0.1);
    }

    .node-thirdgender {
      background-color: rgba(238, 130, 238, 0.11);
    }

    .node img {
      max-height: 82px;
      margin-right: 10px;
    }



    /* Style all font awesome icons */
    .fa {
      padding: 2px;
      width: 20px;
      text-align: center;
      text-decoration: none;
      border-radius: 25%;
    }

    /* Add a hover effect if you want */
    .fa:hover {
      opacity: 0.7;
    }

    /* Set a specific color for each brand */

    /* Facebook */
    .fa-facebook {
      background: #3B5998;
      color: white;
    }

    /* Twitter */
    .fa-twitter {
      background: #55ACEE;
      color: white;
    }



    .form-input {
      background: #d2d3d46e;
    }

    .app-title {
      background: #343a40;
      width: 100%;
      color: white;
      text-align: center;
      font-weight: bold;
      padding: 12px;
      font-size: 120%;
      margin: 0;
    }

    #progressbar {
      width: 100%;
      height: 5px;
      border: none;
    }

    .ui-progressbar .ui-progressbar-value {
      border: 1px solid #26843c;
      background: #28a745;
    }
  
    @media print {

      .no-print,
      .no-print * {
        display: none !important;
      }     
    }

    .dropdown-settings a input {
      margin-right: 4px;
    }

    .co_index {
      display: none;
    }

    .wikipediatext {
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 8;
      -webkit-box-orient: vertical;
    }

    .wikipediatext p {
      margin-bottom: 0;
    }
  </style>

<body>
  <div class="container-fluid">
    <div class="row no-print">
      <h1 class="app-title row">
        <span class="col-sm-2">
          <a class="btn btn-sm bg-white float-left" target="_blank" href="https://github.com/dataprick/wikitree">
            <img class="img img-fluid" src="storage/icons/github.png" style="max-height: 20px" ; /> Wikitree
          </a>
        </span>
        <span class="col-sm-8">
          Wikidata Tree Builder
          <div class="dropdown" style="margin-left:50px;display:inline;">
            <a class="btn btn-sm btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
              data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              examples
            </a>

            <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
              <a class="dropdown-item"
                href="?q=Q712401&level=4&type=descendants&orientation=West&lang=en&options[birthname]=on&options[socialmedia]=on">Sudono
                Salim descendants</a>
              <a class="dropdown-item"
                href="?q=Q92597022&level=4&type=descendants&orientation=North&lang=en&options[socialmedia]=on">Walton
                Family Tree</a>
              <a class="dropdown-item" href="?q=Q4604&level=20&type=descendants&orientation=North&lang=en">Confucius
                descendants </a>
              <a class="dropdown-item" href="?q=Q5269611&level=6&type=ancestors&orientation=South&lang=en">Dhirendra of
                Nepal ancestors</a>
              <a class="dropdown-item"
                href="?q=Q1516371&level=6&type=owns&orientation=North&lang=en&stack=false&options[socialmedia]=on">Sinar
                Mas subsidiaries</a>
              <a class="dropdown-item"
                href="?q=Q3752663&level=5&type=descendants&orientation=North&lang=en&options[socialmedia]=on">Trump
                family</a>
              <a class="dropdown-item"
                href="?q=Q2430565&level=9&type=descendants&orientation=North&lang=en">Hamengkubuwono, rulers of
                Yogyakarta</a>
              <a class="dropdown-item" href="?q=Q9682&level=5&type=descendants&orientation=North&lang=en">Elizabeth II
                descendants</a>
              <a class="dropdown-item"
                href="?q=Q7404563&level=4&type=descendants&orientation=North&lang=en&options[socialmedia]=on">Khan
                family</a>
              <a class="dropdown-item"
                href="?q=Q7404563&level=4&type=descendants&orientation=North&lang=en&options[socialmedia]=on&options[socialmedia]=on">United
                Nations structure</a>


            </div>
          </div>
        </span>
        <span class="col-sm-2">
          <img
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/Wikidata_Stamp_Rec_Light.svg/200px-Wikidata_Stamp_Rec_Light.svg.png"
            style="background-color:white;height:25px;float: right;" />
        </span>
      </h1>

    </div>
    <div class="row no-print">
      <form method="get" id="search" class="form-input col-md-12 pt-3">
        <input name="q" type="hidden" id="searchbox_id" />

        <div class="form-row">
          <div class="form-group col-md-4 col-sm-12">
            <label for="searchbox">Search</label>
            <input type="text" id="searchbox" class="form-control searchbox" value="" onblur="" onfocus="">
          </div>

          <div class="form-group col-md-1 col-sm-6">
            <label for="option_level">Levels</label>
            <select id="option_level" class="form-control" name="level"></select>
          </div>

          <div class="form-group col-md-2 col-sm-6">
            <label for="type_select">Property</label>
            <select id="type_select" class="form-control" name="type">
              <option>ancestors</option>
              <option>descendants</option>
              <option>owner</option>
              <option>owns</option>
            </select>
          </div>

          <div class="form-group col-md-2 col-sm-6">
            <label for="orientation_select">Root Orientation</label>
            <select id="orientation_select" name="orientation" class="form-control">
              <option>North</option>
              <option>East</option>
              <option>West</option>
              <option>South</option>
            </select>
          </div>

          <div class="form-group col-md-2 col-sm-6">
            <label for="option_lang">Language</label>
            <input type="hidden" value="" name="lang" id="option_lang_hidden" />
            <input id="option_lang" class="form-control" />
          </div>

          <div class="form-group col-md-1 col-sm-6 ">
            <label>Action</label>
            <div class="dropdown" style="display:inline;">
              <a class="btn btn-sm btn-secondary dropdown-toggle" href="#" role="button" id="dropdownSettings"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <!--              <span class="glyphicon glyphicon-cog"></span>-->
              </a>

              <div class="dropdown-menu dropdown-settings dropdown-menu-right" aria-labelledby="dropdownSettings">
                <a class="dropdown-item" href="javascript:void(0);"><input type="checkbox" data-value="birthname"
                    name="options[birthname]" />Birth name</a>
                <a class="dropdown-item" href="javascript:void(0);"><input type="checkbox" data-value="socialmedia"
                    name="options[socialmedia]" />Social Media Links</a>
                <a class="dropdown-item" href="javascript:void(0);"><input type="checkbox" data-value="education"
                    name="options[education]" />Education</a>
                <a class="dropdown-item" href="javascript:void(0);"><input type="checkbox" data-value="spouses"
                    name="options[spouses]" />Spouses</a>
                <a class="dropdown-item" href="javascript:void(0);"><input type="checkbox" data-value="occupations"
                    name="options[occupations]" />Occupations</a>
              </div>
            </div>
            <button type="submit" id="search-button" class="form-control btn btn-primary">Search</button>
          </div>

        </div>

      </form>
    </div>

    <div class="row render-content">
      <div id="progressbar"></div>
      <div class="chart" id="collapsable-example"></div>
      <div id="guiButtons" class="w-100 no-print">
        <!-- <button id="print1">Print 1</button> -->
        <button id="print2" class="btn btn-primary mb-5 mr-3 " style="float:right">Print</button>
      </div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/async/0.9.0/async.js"></script>
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js"></script>



  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

  <!-- Autocomplete , load jqueryui -->
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css" />
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
    integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"
    integrity="sha384-6khuMg9gaYr5AxOqhkVIODVIvm9ynTT5J4V1cfthmT+emCG6yVmEZsRHdxlotUnm"
    crossorigin="anonymous"></script>

  <script src="js/raphael.js"></script>
  <!-- <script src="js/Treant.js"></script> -->
  <script src="js/TreantSpouse.js"></script>
  <script src="js/Treant-gui.js"></script>
  <script src="js/wikidataLang.js"></script>
  <!-- image and canvas -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.2.61/jspdf.min.js"></script> -->
  <!--  <script src="storage/images.js"></script>-->

  <!--<script src="js/main.js"></script>-->

  <!--<script src="js/bundle.js"></script>-->
  <script src="js/treant-wikidata.js"></script>
  <script src="js/search-bar.js"></script>

  <script type="text/javascript">

    //add language parameter to get wikipedia summary based on input language
    function wikipedia(e,lang, first, table) {
      console.log("start");
      var e = $(e);
      e.off('hover');
      $.get("https://"+lang+".wikipedia.org/api/rest_v1/page/summary/" + e.attr("data-wiki"), function (d) {
        e.popover({
          html: true,
          content: '<div class="wikipediatext">' + d.extract_html + '</div>' + (d.thumbnail ? '<img src="' + d.thumbnail.source + '" width="100%" />' : '') + '<a href="https://www.wikidata.org/wiki/Q' + e.attr("data-id") + '" target="_blank">Wikidata</a> - <a href="https://en.wikipedia.org/wiki/' + e.attr("data-wiki") + '" target="_blank">Wikipedia</a>' + (first ? ' - <a href="' + first + '" target="_blank">Offical Website</a>' : '') + (table ? ' - <a href="/compare/' + table + '?Q82799=' + e.text() + '" target="_blank">' + table + ' table</a>' : '')

        }).popover('show');
      });
    }
    //close popover when clicking anywhere
    $('body').on('click', function () {
      $("a[data-id]").popover('hide');
    });


    //print by changing the @page size but not very much supported by other browser
    $('#print2').click(function () {
        var width = document.querySelector("#collapsable-example svg").getAttribute('width');
        var height = document.querySelector("#collapsable-example svg").getAttribute('height');
        
        //add 150px for margin
        width = parseInt(width) + 150;
        height = parseInt(height) + 150;
        //set page print width & height (Chrome)
        document.querySelector('style').textContent +=
          `@media print{
            @page {
              size:${width*1.1}px ${height}px;
            }
            
          }`;
        window.print();
    });
    
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Add font awesome icons -->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-114291666-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-114291666-2');
  </script>

</body>

</html>